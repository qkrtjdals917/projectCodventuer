<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lec.spring.domain.like.LikeDAO">

	<!-- 추천하는 기능 -->
	<insert id="insertLike" parameterType="com.lec.spring.domain.like.LikeDTO">
		INSERT INTO
			mc_like (board_uid, member_uid)
		VALUES
			(#{board_uid} , #{member_uid})
		</insert>
	
	<!-- 추천한 사람들 리스트 가져오기 -->
	<select id="selectByLikeMember" resultType="com.lec.spring.domain.like.LikeDTO">
		SELECT
			member_uid "member_uid"
			board_uid "board_uid"
		FROM
			mc_like
		WHERE board_uid = #{board_uid}
	</select>
	
	<!-- 추천삭제 -->
	<delete id="deleteLike">
		DELETE FROM
			mc_like
		WHERE
			member_uid = #{member_uid}
	</delete>
	
	
	<!-- 글 삭제시 해당 글 추천 모두 삭제 -->
	<delete id="deleteAll">
		DELETE FROM
			mc_like
		WHERE 
			board_uid = #{board_uid}
	</delete>
	
	
	<!-- 추천수 -->
	<select id="incLikeCnt">
		SELECT 
			count(*)
		FROM 
			mc_like 
		GROUP BY board_uid
		WHERE board_uid = #{param0}
	</select>  

</mapper>